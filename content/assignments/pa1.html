---
deps:
- /static/js/tabs.js
- /static/css/tabs.css
layout: minimal
parent: Assignments
permalink: /assignments/pa1.html
title: Programming Assignment 1

---
<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <h2 id="loc-1">1 - Description</h2>
    <p><strong>Warning: you must read <em>everything</em> carefully and be sure to complete <em>all</em> steps for your machine.</strong> Skipping steps can lead to unrecoverable states and you may be forced to fully restart the assignment. <em>Fully read the instructions for each step <strong>before</strong> doing that step</em>.</p>
    <p>The goal of this assignment is for you to learn how to install different <a href="https://en.wikipedia.org/wiki/Unix">Unix</a>-based operating systems:</p>
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/OpenBSD">OpenBSD</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Arch_Linux">Arch Linux</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Debian">Debian</a> (which we will use for subsequent assignments)</li>
    </ul>
    <p>In CS 382 and CS 385, you may have learned how to install <a href="https://en.wikipedia.org/wiki/Ubuntu">Ubuntu</a>, but were likely relying on the installation software. In this assignment, you will be doing the installations manually to get a better understanding of the steps required to install a new operating system.</p>
    <p>Terms:</p>
    <ul>
      <li>“host”: your own physical computer running either Windows or macOS.</li>
      <li>“guest”: a virtual machine (VM) running a Unix-based operating system.</li>
    </ul>
    <div>
      <nav role="doc-toc">
        <h2>contents</h2>
        <ol style="list-style-type: none">
          <li><a href="#loc-1"><span class="prefix">1 -</span> Description</a></li>
          <li><a href="#loc-2"><span class="prefix">2 -</span> Preliminary Steps</a></li>
          <li>
            <div><a href="#loc-3"><span class="prefix">3 -</span> OS-Specific Steps</a></div>
            <ol style="list-style-type: none">
              <li><a href="#loc-4"><span class="prefix">3.1 -</span> Windows</a></li>
              <li>
                <div><a href="#loc-5"><span class="prefix">3.2 -</span> Macos</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#utm-steps"><span class="prefix">3.2.1 -</span> UTM</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            <div><a href="#loc-6"><span class="prefix">4 -</span> Installing Virtualbox</a></div>
            <ol style="list-style-type: none">
              <li><a href="#loc-7"><span class="prefix">4.1 -</span> Virtualbox Application</a></li>
              <li><a href="#loc-8"><span class="prefix">4.2 -</span> Virtualbox Guest Additions</a></li>
            </ol>
          </li>
          <li>
            <div><a href="#loc-9"><span class="prefix">5 -</span> Installing Openbsd</a></div>
            <ol style="list-style-type: none">
              <li><a href="#loc-10"><span class="prefix">5.1 -</span> Creating the OpenBSD VM</a></li>
              <li>
                <div><a href="#loc-11"><span class="prefix">5.2 -</span> Installing OpenBSD on the VM</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#loc-12"><span class="prefix">5.2.1 -</span> Booting the VM</a></li>
                  <li><a href="#loc-13"><span class="prefix">5.2.2 -</span> Network and User Configuration</a></li>
                  <li>
                    <div><a href="#loc-14"><span class="prefix">5.2.3 -</span> Hard Disk Configuration</a></div>
                    <ol style="list-style-type: none">
                      <li><a href="#loc-15"><span class="prefix">5.2.3.1 -</span> Root Disk and MBR Configuration</a></li>
                      <li><a href="#loc-16"><span class="prefix">5.2.3.2 -</span> File System Configuration</a></li>
                    </ol>
                  </li>
                  <li><a href="#loc-17"><span class="prefix">5.2.4 -</span> Set Installation</a></li>
                </ol>
              </li>
              <li>
                <div><a href="#loc-18"><span class="prefix">5.3 -</span> Using OpenBSD</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#loc-19"><span class="prefix">5.3.1 -</span> Setting User Admin Privileges</a></li>
                  <li><a href="#loc-20"><span class="prefix">5.3.2 -</span> Starting the X Window GUI</a></li>
                </ol>
              </li>
              <li><a href="#loc-21"><span class="prefix">5.4 -</span> Deliverables</a></li>
            </ol>
          </li>
          <li>
            <div><a href="#loc-22"><span class="prefix">6 -</span> Installing Arch Linux</a></div>
            <ol style="list-style-type: none">
              <li><a href="#loc-23"><span class="prefix">6.1 -</span> Creating the Arch Linux VM</a></li>
              <li>
                <div><a href="#loc-24"><span class="prefix">6.2 -</span> Installing Arch Linux on the VM</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#loc-25"><span class="prefix">6.2.1 -</span> Booting the VM</a></li>
                  <li><a href="#loc-26"><span class="prefix">6.2.2 -</span> Network Configuration</a></li>
                  <li>
                    <div><a href="#loc-27"><span class="prefix">6.2.3 -</span> Hard Disk Configuration</a></div>
                    <ol style="list-style-type: none">
                      <li><a href="#loc-28"><span class="prefix">6.2.3.1 -</span> Root Disk and MBR Configuration</a></li>
                      <li><a href="#loc-29"><span class="prefix">6.2.3.2 -</span> File System Configuration</a></li>
                    </ol>
                  </li>
                  <li>
                    <div><a href="#loc-30"><span class="prefix">6.2.4 -</span> System Installation and Configuration</a></div>
                    <ol style="list-style-type: none">
                      <li><a href="#loc-31"><span class="prefix">6.2.4.1 -</span> Package Manager and Network Configuration</a></li>
                    </ol>
                  </li>
                  <li><a href="#loc-32"><span class="prefix">6.2.5 -</span> Bootloader Installation</a></li>
                </ol>
              </li>
              <li>
                <div><a href="#loc-33"><span class="prefix">6.3 -</span> Using Arch Linux</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#loc-34"><span class="prefix">6.3.1 -</span> Setting User Admin Privileges</a></li>
                  <li><a href="#loc-35"><span class="prefix">6.3.2 -</span> Starting the X Window GUI</a></li>
                </ol>
              </li>
              <li><a href="#loc-36"><span class="prefix">6.4 -</span> Deliverables</a></li>
            </ol>
          </li>
          <li><a href="#loc-37"><span class="prefix">7 -</span> Quick Comparison of OpenBSD and Arch Linux</a></li>
          <li>
            <div><a href="#loc-38"><span class="prefix">8 -</span> Installing Debian</a></div>
            <ol style="list-style-type: none">
              <li>
                <div><a href="#loc-39"><span class="prefix">8.1 -</span> Creating the Debian VM</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#loc-40"><span class="prefix">8.1.1 -</span> VirtualBox</a></li>
                  <li><a href="#loc-41"><span class="prefix">8.1.2 -</span> UTM</a></li>
                </ol>
              </li>
              <li>
                <div><a href="#loc-42"><span class="prefix">8.2 -</span> Using Debian</a></div>
                <ol style="list-style-type: none">
                  <li><a href="#loc-43"><span class="prefix">8.2.1 -</span> Exploring Debian</a></li>
                  <li>
                    <div><a href="#loc-44"><span class="prefix">8.2.2 -</span> Configure Host File Sharing</a></div>
                    <ol style="list-style-type: none">
                      <li><a href="#loc-45"><span class="prefix">8.2.2.1 -</span> VirtualBox</a></li>
                      <li><a href="#loc-46"><span class="prefix">8.2.2.2 -</span> UTM</a></li>
                    </ol>
                  </li>
                </ol>
              </li>
              <li><a href="#loc-47"><span class="prefix">8.3 -</span> Deliverables</a></li>
            </ol>
          </li>
          <li><a href="#loc-48"><span class="prefix">9 -</span> Submission</a></li>
        </ol>
      </nav>
    </div>
    <h2 id="loc-2">2 - Preliminary Steps</h2>
    <ol>
      <li>
        <p>Make sure your host computer has enough disk space available. You will need about 60 GB of free disk space for installing Debian and completing future programming assignments. If you do not have enough disk space, you can delete some of your data, move it to a cloud, or consider purchasing an external drive to store your data.</p>
        <ul>
          <li><em>Note: it is recommended that you <strong>not</strong> attempt to do coursework in an external drive, as the access times can hurt performance</em>.</li>
        </ul>
      </li>
      <li>
        <p>Make sure your host computer has a reliable internet connection before you begin, as you will be downloading quite a bit of data in this assignment.</p>
      </li>
      <li>
        <p>You may need to reboot your host machine. Be prepared for this.</p>
      </li>
    </ol>
    <h2 id="loc-3">3 - OS-Specific Steps</h2>
    <div class="tabs"><button class="btn tab-btn os-instructions windows selected" onclick="show_tab_class(event, &quot;os-instructions&quot;, &quot;windows&quot;)">windows</button><button class="btn tab-btn os-instructions macos" onclick="show_tab_class(event, &quot;os-instructions&quot;, &quot;macos&quot;)">macos</button></div>
    <div class="tab-content os-instructions windows selected">
      <h3 id="loc-4">3.1 - Windows</h3>
      <p><a href="https://en.wikipedia.org/wiki/VirtualBox">VirtualBox</a> is virtualization software (a <a href="https://en.wikipedia.org/wiki/Hypervisor#Classification">type-2 hypervisor</a>) you can install on your host machine to create and manage guest virtual machines running on top of your host OS.</p>
      <p>Before you install and use VirtualBox, first you need to make sure that Windows’ own Hyper-V VM software is disabled, otherwise it will conflict with VirtualBox, causing VirtualBox to fail or run in an extremely slow emulation mode.</p>
      <ol>
        <li>
          <p>Open <code>Control Panel</code>.</p>
        </li>
        <li>
          <p>Select “Programs and Features”.</p>
        </li>
        <li>
          <p>Select “Turn Windows features on or off”.</p>
        </li>
        <li>
          <p>Ensure the following features are unchecked if present in the list:</p>
          <ul>
            <li>“Hyper-V”</li>
            <li>“Windows Hypervisor Platform”</li>
            <li>“Virtual Machine Platform”</li>
          </ul>
        </li>
        <li>
          <p>Select “OK” and reboot your computer if prompted.</p>
        </li>
        <li>
          <p>Open <code>Windows Security</code>.</p>
        </li>
        <li>
          <p>Select “Device security” in the left column.</p>
        </li>
        <li>
          <p>Select “Core isolation details” link.</p>
        </li>
        <li>
          <p>Ensure “Memory Integrity” is turned off.</p>
          <ul>
            <li>Leaving this on will force VirtualBox to run in emulation mode rather than the faster virtualization mode.</li>
          </ul>
        </li>
        <li>
          <p>Reboot your computer if prompted.</p>
        </li>
      </ol>
    </div>
    <div class="tab-content os-instructions macos">
      <h3 id="loc-5">3.2 - Macos</h3>
      <p><a href="https://en.wikipedia.org/wiki/VirtualBox">VirtualBox</a> should work without issue on Intel-based Apple computers. If you have an Intel-based computer, skip this section.</p>
      <p>Since VirtualBox does not support x86 emulation on Apple Silicon, we will need to use <a href="https://mac.getutm.app/">UTM</a>.</p>
      <p>Notes:</p>
      <ul>
        <li><a href="https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion">VMWare Fusion Pro for Mac</a> will work for subsequent programming assignments, but <a href="https://www.parallels.com/">Parallels</a> will <strong>not</strong>.</li>
        <li>The virtualization software you use <strong>must allow you to select the kernel to boot at VM startup</strong>. (Multipass will not work)</li>
      </ul>
      <h4 id="utm-steps">3.2.1 - UTM</h4>
      <p>You can install UTM from the <a href="https://mac.getutm.app/">website</a> or using homebrew:</p>
      <pre><code data-lang="bash"><span style="color: #4b69c6">brew</span> install --cask utm</code></pre>
      <p>When using UTM, <strong>every time</strong> you create a new VM, you must do all of the following:</p>
      <ol>
        <li>
          <p>Create the VM:</p>
          <ol>
            <li>Select an <em>emulation</em> VM, <strong>not</strong> a virtualization V, because you are going to install operating systems for amd64, not your native arm64 architecture.</li>
            <li>Select “Other” when installing OpenBSD, or “Linux” when installing Arch or Debian.</li>
            <li>Select the correct ISO file for the desired OS.</li>
            <li>
              <p>For “Disk Size”:</p>
              <ul>
                <li>OpenBSD: 6 GB</li>
                <li>Arch: 6 GB</li>
                <li>Debian: 60 GB</li>
              </ul>
            </li>
            <li>Continue VM creation using <em>default</em> values and select “Save”. <strong>Do NOT start the new VM yet</strong>.</li>
          </ol>
        </li>
        <li>
          <p>Configure VM Settings <strong>before installing an OS</strong>:</p>
          <ol>
            <li>Select the Settings icon in the upper right corner of the UTM window.</li>
            <li>
              <p>Under “System”:</p>
              <ol>
                <li>
                  <p>Under “CPU”:</p>
                  <ol>
                    <li>Select “Enables all features supported by the accelerator in the current host (max)”.</li>
                    <li>If the above does not work, select “qemu64” (bottom of the list)</li>
                  </ol>
                </li>
                <li>Enable “Force <a href="https://en.wikipedia.org/wiki/Multi-core_processor">Multicore</a>”</li>
                <li>Ensure “CPU Cores” matches your host system (see <a href="https://support.macincloud.com/support/solutions/articles/8000087401-how-can-i-check-the-number-of-cpu-cores-on-a-mac#:~:text=Navigate%20towards%20the%20top%20left,of%20%22Total%20number%20of%20Cores%22">here</a>)</li>
              </ol>
            </li>
            <li>
              <p>Under “QEMU”:</p>
              <ol>
                <li>Disable “UEFI Boot”. (This assignment assumes VMs are using <a href="https://en.wikipedia.org/wiki/BIOS">BIOS</a>/<a href="https://en.wikipedia.org/wiki/Master_boot_record">MBR</a>, rather than <a href="https://en.wikipedia.org/wiki/UEFI">UEFI</a>/<a href="https://en.wikipedia.org/wiki/GUID_Partition_Table">GPT</a>)</li>
                <li>Enable “Force <a href="https://en.wikipedia.org/wiki/PS/2_port">PS/2</a> controller”. (required for the virtual keyboard to work correctly, especially on OpenBSD)</li>
                <li>Enable “Use local time for base clock”. (especially for Arch Linux)</li>
              </ol>
            </li>
            <li>
              <p>Under “Input”:</p>
              <ol>
                <li>Disable all USB options. (prevent conflict between PS/2 and USB virtual keyboards)</li>
              </ol>
            </li>
            <li>
              <p>Under “Display”:</p>
              <ol>
                <li>Set “Emulated Display Card” to “<a href="https://en.wikipedia.org/wiki/Video_Graphics_Array">VGA</a>” (Linux distros will have blank screen otherwise)</li>
              </ol>
            </li>
          </ol>
        </li>
        <li>
          <p>Save settings and start the VM.</p>
        </li>
      </ol>
      <p>This process is not regularly tested, so please contact the instructor if you run into issues.</p>
    </div>
    <h2 id="loc-6">4 - Installing Virtualbox</h2>
    <p>This need only be done once. Skip this section if you are on Mac and have installed UTM.</p>
    <h3 id="loc-7">4.1 - Virtualbox Application</h3>
    <p>If you already have VirtualBox v7.x installed, you may skip this section.</p>
    <p>You can use a package manager to install VirtualBox, or install it manually:</p>
    <div class="tabs"><button class="btn tab-btn vbox-install-instructions manual selected" onclick="show_tab_class(event, &quot;vbox-install-instructions&quot;, &quot;manual&quot;)">manual</button><button class="btn tab-btn vbox-install-instructions choco" onclick="show_tab_class(event, &quot;vbox-install-instructions&quot;, &quot;choco&quot;)">choco</button></div>
    <div class="tab-content vbox-install-instructions manual selected">
      <ol>
        <li>Go to the VirtualBox <a href="https://www.virtualbox.org/wiki/Downloads">download page</a>.</li>
        <li>Under “VirtualBox Platform Packages”, download the correct version for your host platform and launch it.</li>
        <li>Use all default options during install.</li>
        <li>Ignore “Missing Dependencies Python Core” warnings.</li>
      </ol>
    </div>
    <div class="tab-content vbox-install-instructions choco">
      <p><a href="https://community.chocolatey.org/">Chocolatey</a> is a Windows package manager.</p>
      <p>Once installed, you can install VirtualBox using:</p>
      <pre><code data-lang="powershell">choco install virtualbox</code></pre>
    </div>
    <h3 id="loc-8">4.2 - Virtualbox Guest Additions</h3>
    <p>You will need to install guest additions on Debian later in this assignment.</p>
    <p>Download the <code>VboxGuestAdditions_X.Y.Z.iso</code> from the <code>X.Y.Z/</code> folder at <a href="https://download.virtualbox.org/virtualbox">download.virtualbox.org</a>.</p>
    <h2 id="loc-9">5 - Installing Openbsd</h2>
    <p>OpenBSD is one of the members of the <a href="https://en.wikipedia.org/wiki/Berkeley_Software_Distribution">BSD family</a> of Unix operating systems. It is interesting for you to install and use because:</p>
    <ul>
      <li>It has a text-based installation procedure that clearly shows all required steps without being too difficult to use.</li>
      <li>OpenBSD is designed to be self-contained and work well “out of the box” with little extra software or configuration required.</li>
      <li>
        <p>It makes it easy to see the difference between</p>
        <ul>
          <li>the <a href="https://en.wikipedia.org/wiki/Bootloader">bootloader</a> (the early time software that allows you to select which kernel to boot)</li>
          <li>the <a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)">kernel</a> proper</li>
          <li>the <a href="https://en.wikipedia.org/wiki/Daemon_(computing)">operating system services</a></li>
          <li>the text-based <a href="https://en.wikipedia.org/wiki/Virtual_console">console</a> with a <a href="https://en.wikipedia.org/wiki/Shell_(computing)#Command-line_shells">shell</a> command line interpreter</li>
          <li>the <a href="https://en.wikipedia.org/wiki/X_Window_System">X Window</a> graphical user interface</li>
        </ul>
      </li>
      <li>As a CS or CSE student, you should use a BSD system at least once in your life. Unix is more than just Linux!</li>
    </ul>
    <h3 id="loc-10">5.1 - Creating the OpenBSD VM</h3>
    <ol>
      <li>
        <p>Download the ISO</p>
        <ol>
          <li>Visit the <a href="https://www.openbsd.org/">OpenBSD website</a>.</li>
          <li>Click the “Download” link in the left column of the web page.</li>
          <li>Download the ISO <code>installXY.iso</code> file (note the extension) for the “<a href="https://en.wikipedia.org/wiki/X86-64">amd64</a>” architecture. (this includes students on Apple Silicon)</li>
        </ol>
      </li>
      <li>
        <p>Start VirtualBox and click the blue “New” button to create a new VM.</p>
        <ol>
          <li>Give the name “cs492-openbsd” to your new VM.</li>
          <li>For the “ISO image”, select the <code>installXY.iso</code> file you just downloaded.</li>
          <li>
            <p>Under “Hardware”:</p>
            <ul>
              <li>Memory size: 4096 MB</li>
              <li>Processors: max physical cores (green zone) (red zone indicates <a href="https://en.wikipedia.org/wiki/Simultaneous_multithreading">logical cores</a>, which is irrelevent because OpenBSD disables hardware multithreading for <a href="https://en.wikipedia.org/wiki/Hyper-threading#Security">security reasons</a>.)</li>
            </ul>
          </li>
          <li>
            <p>Under “Hard Disk”:</p>
            <ul>
              <li>Virtual hard disk size: 6 GB</li>
            </ul>
          </li>
          <li>Hit “Finish”.</li>
        </ol>
        <p>At this point, you should have a VM with an empty 6GB virtual disk and a virtual CD containing the OpenBSD installation software.</p>
      </li>
      <li>
        <p>Configure VM display:</p>
        <ol>
          <li>Select the orange “Settings” button in VirtualBox on the VM</li>
          <li>
            <p>Under “Display”:</p>
            <ol>
              <li>Change “<a href="https://en.wikipedia.org/wiki/Graphics_card">Graphics Controller</a>” to “VBoxSVGA”. (seems to work better with OpenBSD. ignore any warnings)</li>
            </ol>
          </li>
          <li>
            <p>Under “Storage”:</p>
            <ol>
              <li>Select “<a href="https://en.wikipedia.org/wiki/Disk_controller">Controller</a>” (with hard disk and CD as children):</li>
              <li>Change “Type” to “<a href="https://en.wikipedia.org/wiki/Advanced_Host_Controller_Interface">AHCI</a>”</li>
            </ol>
          </li>
          <li>Hit “OK”</li>
        </ol>
      </li>
    </ol>
    <h3 id="loc-11">5.2 - Installing OpenBSD on the VM</h3>
    <p><em>Remember to read each step before doing it!</em></p>
    <h4 id="loc-12">5.2.1 - Booting the VM</h4>
    <ol>
      <li>
        <p>Click the green “Start” arrow to start your virtual machine.</p>
        <ul>
          <li>The virtual machine will automatically boot from its virtual CD and start the installation software, which is a special copy of OpenBSD.</li>
        </ul>
      </li>
      <li>
        <p>You should see a <code>boot></code> prompt. This is the OpenBSD <a href="https://en.wikipedia.org/wiki/Bootloader">bootloader</a>, which allows you to select the kernel you want to use. In this case, you can wait 5 seconds or hit <code>Enter</code> to allow the bootloader to automatically select a kernel.</p>
        <p>After the kernel is selected, for a brief time, you should see text with numbers. This is the bootloader copying the selected kernel from the virtual CD into VM memory.</p>
      </li>
      <li>
        <p>When the background turns blue it means the <a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)">kernel</a> itself is running. The kernel will print a bunch of info to the screen describing the hardware it detects.</p>
      </li>
      <li>
        <p>(VirtualBox-only) Enlarging the screen if needed:</p>
        <ol>
          <li>Click “View” in the window’s upper left corner</li>
          <li>Click “Virtual Screen 1”</li>
          <li>Select a scaling percentage (can be changed again later)</li>
        </ol>
      </li>
    </ol>
    <h4 id="loc-13">5.2.2 - Network and User Configuration</h4>
    <p>After the kernel has finished booting, the OpenBSD install script will begin automatically and you will be presented with the “Install, Upgrade, Autoinstall, Shell” prompt.</p>
    <p>This installation script has many steps. Most are trivial, though a few are complex. Most will also have a default option between square brackets (<code>[]</code>), which is usually (but not always) correct.</p>
    <p>If you make a mistake during the installation procedure, you can press <code>Ctrl-C</code> to abort the script and restart from the beginning by typing <code>install</code> at the <code>#</code> prompt.</p>
    <ol>
      <li>
        <p>Type <code>I</code> and hit <code>Enter</code> to begin the install script.</p>
        <p>For the first portion of the script, configure OpenBSD according to the table below.</p>
        <table>
          <thead>
            <tr>
              <th><strong>Setting</strong></th>
              <th><strong>Value</strong></th>
              <th><strong>Comment</strong></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Keyboard Layout</td>
              <td>Default (<code>US/English</code>)</td>
              <td></td>
            </tr>
            <tr>
              <td>System Hostname</td>
              <td><code>obsd</code></td>
              <td></td>
            </tr>
            <tr>
              <td>Network Interface to Configure</td>
              <td>Default (<code>em0</code>)</td>
              <td>OpenBSD’s name for the (virtual) hardware <a href="https://en.wikipedia.org/wiki/Network_interface_controller">Ethernet nework controller</a></td>
            </tr>
            <tr>
              <td><a href="https://en.wikipedia.org/wiki/Internet_Protocol_version_4">IPv4</a> Address</td>
              <td>Default (<code>autoconf</code>)</td>
              <td>
                <p>OpenBSD will use the <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">DHCP</a> network protocol to automatically configure an IP address for the Ethernet network interface of the VM.</p>
                <p>The installation script will also configure the system to automatically use DHCP to get an IP address every time you reboot the VM.</p>
              </td>
            </tr>
            <tr>
              <td><a href="https://en.wikipedia.org/wiki/IPv6">IPv6</a> Address</td>
              <td>Default (<code>none</code>)</td>
              <td></td>
            </tr>
            <tr>
              <td>Network Interface</td>
              <td>Default (<code>done</code>)</td>
              <td></td>
            </tr>
            <tr>
              <td><a href="https://en.wikipedia.org/wiki/Superuser#Unix_and_Unix-like"><code>root</code></a> Password</td>
              <td><code>obsd</code></td>
              <td>Note: on many Unix systems, passwords will not appear on-screen when typed in a shell.</td>
            </tr>
            <tr>
              <td>Start <a href="https://en.wikipedia.org/wiki/Secure_Shell"><code>sshd</code></a></td>
              <td><code>no</code></td>
              <td>Note: we do not want anyone using ssh to login to the VM.</td>
            </tr>
            <tr>
              <td>Run <a href="https://en.wikipedia.org/wiki/X_Window_System">X Window</a></td>
              <td>Default (<code>yes</code>)</td>
              <td></td>
            </tr>
            <tr>
              <td>Use <code>xenodm</code></td>
              <td>Default (<code>no</code>)</td>
              <td>Note: you will learn how to start the X Window GUI manually later.</td>
            </tr>
            <tr>
              <td>Setup User</td>
              <td>Stevens login name</td>
              <td>e.g. <code>rtsang1</code> from <code>rtsang1@stevens.edu</code>.</td>
            </tr>
            <tr>
              <td>Full Name</td>
              <td>Your full name</td>
              <td></td>
            </tr>
            <tr>
              <td>Password</td>
              <td><code>obsd</code></td>
              <td>Your user account password.</td>
            </tr>
            <tr>
              <td>Time Zone</td>
              <td>Default (<code>EST</code>)</td>
              <td>Note: you can input <code>?</code> for a list of available time zones.</td>
            </tr>
          </tbody>
        </table>
      </li>
    </ol>
    <h4 id="loc-14">5.2.3 - Hard Disk Configuration</h4>
    <p>At this point, you should be at <a href="https://en.wikipedia.org/wiki/Disk_partitioning">hard disk configuration</a>.</p>
    <blockquote class="aside" id="aside-hard-disks">A single hard disk can be divided into multiple “<a href="https://en.wikipedia.org/wiki/Disk_partitioning#Primary_partition">primary partitions</a>”, with each partition storing a different operating system (sort of). For example, one primary partition could store Windows while another stores OpenBSD, and the OS to run could be chosen at boot-time using the bootloader. This is called <a href="https://en.wikipedia.org/wiki/Multi-booting">multi-booting</a>.</blockquote>
    <p>In this stage we will first configure the <a href="https://en.wikipedia.org/wiki/Master_boot_record">Master Boot Record</a> (MBR), which stores the number of primary partitions, their type, and their size, in the first sector (data block) of the hard disk.</p>
    <p>Then we will configure at least one <a href="https://en.wikipedia.org/wiki/File_system">file system</a>. For simplicity, we will use a single primary partition occupying the entire virtual hard disk that has a single FFS file system for the root directory.</p>
    <blockquote class="aside" id="aside-file-systems">
      <p>Inside each primary partition, multiple file systems can be created for the same OS (if the OS supports it). For example, one OpenBSD <a href="https://en.wikipedia.org/wiki/Unix_File_System">FFS</a> file system for the <code>/</code> <a href="https://en.wikipedia.org/wiki/Root_directory">root directory</a>, and another FFS for the <code>/home</code> <a href="https://en.wikipedia.org/wiki/Home_directory">user home directories</a> can be created in the same primary partition.</p>
      <p>Linux also supports multiple file systems in a partition, but uses <a href="https://en.wikipedia.org/wiki/Ext4">ext4</a>, but also supports <a href="https://en.wikipedia.org/wiki/Ext2">ext2</a> and <a href="https://en.wikipedia.org/wiki/Btrfs">btrfs</a> among others.</p>
      <p>By contrast, Windows only has one <a href="https://en.wikipedia.org/wiki/NTFS">NTFS</a> file system per primary partition (e.g. <code>C:</code> and <code>D:</code> drives).</p>
    </blockquote>
    <h5 id="loc-15">5.2.3.1 - Root Disk and MBR Configuration</h5>
    <ol>
      <li>
        <p>Configure the root disk and MBR as follows:</p>
        <table>
          <thead>
            <tr>
              <th><strong>Setting</strong></th>
              <th><strong>Value</strong></th>
              <th><strong>Comment</strong></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>root</code> Disk</td>
              <td><code>sd0</code></td>
              <td>
                <p>To see a full list of available hard disks in the VM, type <code>?</code> and hit <code>Enter</code>. <code>sd0</code> should be the only option, with the name “VBOX HARDISK” (or “QEMU HARDISK” for Apple users on UTM), and a size of 6 GB.</p>
                <p>This is the hard disk where the OpenBSD primary partition and root filesystem will be created.</p>
              </td>
            </tr>
            <tr>
              <td><code>root</code> Disk Encryption</td>
              <td>Default (<code>no</code>)</td>
              <td>This option encrypts the entire hard disk, which would affect performance if selected.</td>
            </tr>
            <tr>
              <td>Whole disk MBR/GPT</td>
              <td>Default (<code>whole</code>)</td>
              <td>
                <p>Since the disk is still empty, it does not yet have a <a href="https://en.wikipedia.org/wiki/Master_boot_record">Master Boot Record</a>. When you select <code>whole</code>, the installation script will create a single primary partition using <code>fdisk</code> that will occupy the entirety of the virtual hard disk. Then it will create a new MBR for the partition.</p>
              </td>
            </tr>
          </tbody>
        </table>
        <blockquote class="aside" id="aside-mbr">
          <p>Note that the primary partition does not start in disk sector 2 (which immediately follows the MBR). Some empty disk space must be left between the MBR and the start of the partition to store the OpenBSD bootloader. <code>fdisk</code> automatically accounts for this.</p>
          <p><a href="https://en.wikipedia.org/wiki/GUID_Partition_Table">GPT</a> is a more recent and more advanced version of the same kind of partition table that allows you to create more than 4 primary partitions. MBR with up to 4 partitions is plenty for us.</p>
        </blockquote>
      </li>
    </ol>
    <h5 id="loc-16">5.2.3.2 - File System Configuration</h5>
    <p>Now we need to create a single <code>/</code> root file system (rfs) in our primary partition.</p>
    <p>The install script automatically offers a default configuration of file systems, with a root file system in addition to <code>/usr</code>, <code>/home</code>, and “swap” file systems. (swap is used for memory management and will be revisited later in the course)</p>
    <p>Since this is not what we want, we will configure our file system manually.</p>
    <ol>
      <li>
        <p>Start the custom file system configuration by entering <code>c</code> into the prompt.</p>
        <p>This will start OpenBSD’s <a href="https://en.wikipedia.org/wiki/BSD_disklabel">disklabel</a> interactive editor, and a new prompt (<code>sd0> </code>) will appear.</p>
        <p>In this mode you will be able to specify the number of file systems to create, along with their location, size, type, and directory path (e.g. <code>/</code>, <code>/usr</code>, <code>/home</code>).</p>
        <p>You can enter <code>?</code> into the prompt to get a list of available commands.</p>
      </li>
      <li>
        <p>Enter <code>a</code> to add a new file system with the following configurations:</p>
        <table>
          <thead>
            <tr>
              <th><strong>Setting</strong></th>
              <th><strong>Value</strong></th>
              <th><strong>Comment</strong></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Partition</td>
              <td>Default (<code>a</code>)</td>
              <td>
                <p>File system “a” on disk “sd0” will have a full name “sd0a”.</p>
                <p>Note that OpenBSD uses the word “partition” in place of “file system” for historical reasons.</p>
              </td>
            </tr>
            <tr>
              <td>Offset</td>
              <td>Default</td>
              <td>
                <p>The offset indicates the hard disk sector number where the start of the file system will be placed in the primary partition.</p>
                <p>Do not try to change this unless you know how the file system is organized in the primary partition.</p>
              </td>
            </tr>
            <tr>
              <td>Size</td>
              <td>Default</td>
              <td>
                <p>Size of the file system in number of disk sectors.</p>
                <p>The default value corresponds to the size of the entire primary partition. A different size (e.g. “3G”) could be specified to leave room for another file system.</p>
              </td>
            </tr>
            <tr>
              <td>FS Type</td>
              <td>Default (<code>4.2BSD</code>)</td>
              <td>Standard file system type for BSD systems (also called “FFS” or “UFS”).</td>
            </tr>
            <tr>
              <td>Mount point</td>
              <td><code>/</code></td>
              <td>Mount the file system at the root directory.</td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>
        <p>When the prompt returns (<code>sd0*> </code>), you can enter <code>p</code> to show the current state.</p>
        <p>You should see the <code>a</code> file system, and the unused <code>c</code> file system, which represents the whole primary partition.</p>
        <p>The <code>*</code> in the prompt indicates that the changes are pending; <code>disklabel</code> has not yet changed anything on the hard disk (much like git staging before commits).</p>
      </li>
      <li>
        <p>When you are ready to commit changes to the disk, enter <code>w</code>, then <code>q</code> to quit <code>disklabel</code>.</p>
        <p>After quitting, the root file system should be initialized automatically, and you will see logs about <code>/dev/sd0a</code>.</p>
        <p>Note that this new file system is mounted at <code>/mnt</code>, not <code>/</code>. This is because the virtual CD was mounted at <code>/</code> on boot, and the installer program is currently using it.</p>
        <p><code>/mnt</code> is a temporary mount point and the newly configured file system will be mounted at <code>/</code> the next time the VM boots from the virtual hard disk.</p>
      </li>
    </ol>
    <h4 id="loc-17">5.2.4 - Set Installation</h4>
    <p>“Installing the sets” refers to copying the OpenBSD operating system files (kernel, system utilities, man pages, GUI, etc.) to the root file system.</p>
    <ol>
      <li>
        <p>Install the sets according to the table below:</p>
        <table>
          <thead>
            <tr>
              <th><strong>Setting</strong></th>
              <th><strong>Value</strong></th>
              <th><strong>Comment</strong></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Location of sets</td>
              <td><code>cd0</code></td>
              <td>The virtual CD (located at <code>cd0</code>) includes all the required file sets (file packages).</td>
            </tr>
            <tr>
              <td>Pathname to sets</td>
              <td>Default (<code>X.Y/amd64</code>)</td>
              <td>This is the path on the CD to the location of the <a href="https://www.openbsd.org/faq/faq4.html#FilesNeeded">file sets</a>.</td>
            </tr>
            <tr>
              <td>Set names</td>
              <td>Default (<code>all</code>, <code>done</code>)</td>
              <td>
                <ul>
                  <li><code>bsd</code>: kernel for mono-processor machines</li>
                  <li><code>bsd.mp</code>: kernel for multiprocessor machines (installer will select right kernel automatically based on detected number of cores)</li>
                  <li><code>bsd.rd</code>: special kernel for installation (currently in use)</li>
                  <li><code>baseXY.tgz</code>: basic utilities (<code>ls</code>, etc.)</li>
                  <li><code>compXY.tgz</code>: C compiler and C headers</li>
                  <li><code>manXY.tgz</code>: manual pages</li>
                  <li><code>x*.tgz</code>: X Window GUI files</li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>Continue without verification</td>
              <td><code>yes</code></td>
              <td>The warning about missing <code>SHA256.sig</code> is normal for CD-based installation files, since adding a cryptographic signature file to the ISO file would alter the resulting file’s signature.</td>
            </tr>
            <tr>
              <td>(Maybe) Location of sets</td>
              <td>Default (<code>done</code>)</td>
              <td>After the file sets are copied you may be prompted to install more software. We do not need to.</td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>
        <p>If you get a warning that says “Time appears wrong”, hit <code>Enter</code> and continue.</p>
      </li>
      <li>
        <p>At this point, the installation script will automatially create special files in the <code>/dev</code> directory of your new system to access the (virtual) hardware (“making all device nodes…”).</p>
        <p>It will select the correct kernel (“using bsd.mp instead of bsd”).</p>
        <p>It may apply a <a href="https://en.wikipedia.org/wiki/Firmware">firmware</a> update if needed (<code>fw_update</code>). Firmware is a separate bit of software that runs directly on a hardware device components, like the disk controller or network controller. Firmware is not part of OpenBSD and is usually hardware-specific.</p>
        <p>OpenBSD wil “re-link” (randomize) kernel code locations for security reasons (think <a href="https://en.wikipedia.org/wiki/Address_space_layout_randomization">ASLR</a>).</p>
        <p>Finally, the script will silently install the OpenBSD bootloader on the hard disk between the MBR and the start of the primary partition.</p>
        <p>The bootloader is necessary so that the VM can locate and load the OpenBSD kernel.</p>
      </li>
      <li>
        <p>Enter <code>h</code> to halt. Wait until you see “Please press any key to reboot”, then close the window. <em>Do not use the default (<code>reboot</code>) option!</em></p>
        <p>VirtualBox: Select “Power off the machine” in the prompt.</p>
        <p>The virtual installation CD needs to be ejected before we reboot the VM.</p>
      </li>
      <li>
        <p>Eject the installation CD.</p>
        <div class="tabs"><button class="btn tab-btn eject-instructions virtualbox selected" onclick="show_tab_class(event, &quot;eject-instructions&quot;, &quot;virtualbox&quot;)">virtualbox</button><button class="btn tab-btn eject-instructions utm" onclick="show_tab_class(event, &quot;eject-instructions&quot;, &quot;utm&quot;)">utm</button></div>
        <div class="tab-content eject-instructions virtualbox selected">
          <p>In VirtualBox:</p>
          <ol>
            <li>Open the VM’s settings.</li>
            <li>
              <p>Under “Storage”:</p>
              <ol>
                <li>Select the <code>installXY.iso</code> CD file.</li>
                <li>Select the blue CD icon to the right of the “Optical Drive” menu.</li>
                <li>Select “Remove Disk from Virtual Drive” to simulate ejecting the installation CD.</li>
                <li>Click “OK”.</li>
              </ol>
            </li>
          </ol>
        </div>
        <div class="tab-content eject-instructions utm">
          <p>In UTM:</p>
          <ol>
            <li>Stop the VM if it’s status is “Suspended” (“Stop” button in upper right corner).</li>
            <li>Open the VM’s settings by right-clicking on the VM and selecting “Edit”.</li>
            <li>Select the “IDE Drive” that corresponds to the <code>installXY.iso</code> file.</li>
            <li>Select “Clear” next to the “Path” entry to remove the file from the virtual CD drive.</li>
          </ol>
        </div>
      </li>
    </ol>
    <h3 id="loc-18">5.3 - Using OpenBSD</h3>
    <p>After starting the VM, you should see a similar sequence of steps. The <code>boot><span style="white-space: pre-wrap">&#x20;</span></code> prompt will appear for 5 seconds before copying the kernel into main memory. The text background will turn blue while the kernel is running. The difference this time is that the VM is booting from its own disk rather than the installation CD.</p>
    <p>After the kernel finishes booting, the <a href="https://en.wikipedia.org/wiki/Daemon_(computing)">system services</a> will start, showing messages with a black background again.</p>
    <p>Some things you might see:</p>
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/Syslog"><code>syslogd</code></a>: the OS message loggin service</li>
      <li><a href="https://en.wikipedia.org/wiki/Network_Time_Protocol"><code>ntpd</code></a>: the system time service</li>
      <li><a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol"><code>smtpd</code></a>: the system’s local email service</li>
      <li><a href="https://en.wikipedia.org/wiki/Sndio"><code>sndiod</code></a>: system sound service</li>
    </ul>
    <p>All these services are part of the OpenBSD operating system, but they run as separate user-mode processes outside the kernel.</p>
    <h4 id="loc-19">5.3.1 - Setting User Admin Privileges</h4>
    <ol>
      <li>
        <p>Login as <code>root</code>, use <code>obsd</code> password. This will get you a <code>ksh</code> shell by default with a prompt <code>obsd#<span style="white-space: pre-wrap">&#x20;</span></code> (the system name followed by <code>#</code> to indicate admin user instead of the normal <code>$</code>).</p>
      </li>
      <li>
        <p>Give your user account (your Stevens login name) admin privileges:</p>
        <ol>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">cd</span> /etc <span style="color: #d73948">;</span> <span style="color: #4b69c6">ls</span></code>. Most OpenBSD system config files live here.</p>
          </li>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">cp</span> examples/doas.conf .</code>. Create a <code>doas.conf</code> config file for the <code>doas</code> command (like <code>sudo</code> in Linux). The example config will automatically allow any user in the <code>wheel</code> user group to run commands as administrator.</p>
            <p>You can view the contents of the file with <code data-lang="bash"><span style="color: #4b69c6">cat</span> doas.conf</code>.</p>
          </li>
          <li>
            <p>Add your user account to the <a href="https://en.wikipedia.org/wiki/Wheel_(computing)"><code>wheel</code></a> group.</p>
            <p>Luckily, users created during the installation process are automatically added to the <code>wheel</code> group.</p>
            <p>You can check who is in the <code>wheel</code> group with <a href="https://en.wikipedia.org/wiki/Grep"><code>grep</code></a> using the command <code data-lang="bash"><span style="color: #4b69c6">grep</span> wheel /etc/group</code>.</p>
          </li>
          <li>
            <p><code>exit</code> to exit the shell and return to the login prompt.</p>
          </li>
        </ol>
      </li>
    </ol>
    <h4 id="loc-20">5.3.2 - Starting the X Window GUI</h4>
    <p>The text-based screen, or text user interface (TUI), where your shell runs is called the <a href="https://en.wikipedia.org/wiki/Virtual_console">virtual console</a>. OpenBSD (and Linux) have multiple virtual consoles available, but these are not always the most convenient.</p>
    <p>Instead, we will manually start the <a href="https://en.wikipedia.org/wiki/X_Window_System">X Window</a> GUI.</p>
    <ol>
      <li>
        <p>Login with your Stevens username (e.g. <code>rtsang1</code>) and <code>obsd</code> as your password. You will be logged in to your user home directory.</p>
        <p>Use <code>pwd</code> to see the current directory path, and <code>ls -la</code> to see a detailed list of files in the current directory.</p>
      </li>
      <li>
        <p>Run <code data-lang="bash"><span style="color: #4b69c6">doas</span> xenodm</code> to manually start the X Window GUI. Enter your the root password (<code>obsd</code>) and you should see the GUI.</p>
        <blockquote class="aside" id="aside-x-window-doas">OpenBSD users do not usually need to use admin privileges with <code>doas</code> to start the X Window Gui, but it is required here because the VM has a very basic virtual graphics card.</blockquote>
        <blockquote class="aside" id="aside-x-window-default-gui">
          <p>The default OpenBSD GUI is quite ugly. The bare X Window system minimally handles:</p>
          <ul>
            <li>the mouse</li>
            <li>the keyboard</li>
            <li>the computer screen</li>
            <li>the <a href="https://en.wikipedia.org/wiki/FVWM">FVWM</a> <a href="https://en.wikipedia.org/wiki/X_window_manager">window manager</a> (allows you to have menus; create, move, and resize windows; etc.)</li>
          </ul>
          <p>OpenBSD has better GUIs available (e.g. <a href="https://en.wikipedia.org/wiki/KDE_Plasma_5">KDE</a>) but the bare GUI is enough for this assignment.</p>
        </blockquote>
      </li>
    </ol>
    <h3 id="loc-21">5.4 - Deliverables</h3>
    <p>To prove you have installed and used OpenBSD successfully, you will submit a screenshot showing the OpenBSD kernel version and the output of the <code>id</code> command.</p>
    <ol>
      <li>
        <p>Enlarge the text in the <a href="https://en.wikipedia.org/wiki/Xterm"><code>xterm</code></a> terminal window.</p>
        <ol>
          <li>Hold <code>Ctrl+Right-Click</code> in the center of the <code>xterm</code> window to see text size options and select “Huge”.</li>
        </ol>
      </li>
      <li>
        <p>Run the following commands:</p>
        <ol>
          <li><code data-lang="bash"><span style="color: #4b69c6">uname</span> -a</code> to show OpenBSD kernel version.</li>
          <li><code data-lang="bash"><span style="color: #4b69c6">id</span></code> to show username and user groups.</li>
        </ol>
      </li>
      <li>
        <p>Take a screenshot of the OpenBSD screen. You can use VirtualBox’s built-in option <code>View -> Take Screenshot</code>, or your host OS screenshot tools.</p>
        <p>An example can be seen in Figure <a href="#screenshot-openbsd">Figure 1</a>.</p>
        <figure id="screenshot-openbsd">
          <div class="image fit"><img src="/images/screenshot-openbsd.png"></div>
          <figcaption>Figure 1: OpenBSD Deliverable Example</figcaption>
        </figure>
      </li>
      <li>
        <p>Once you have a screenshot, you can shut down OpenBSD by running <code data-lang="bash"><span style="color: #4b69c6">doas</span> halt -p</code> in the xterm window and enter the root password. This will halt the virtual machine (<code>-p</code> means powerdown), save files to the hard disk (“synching disks…done”), then power down the VM.</p>
      </li>
      <li>
        <p>After powerdown, you can delete the entire VM as it will not be used again in this course. You can also delete the <code>installXY.iso</code> file.</p>
        <p>Congratulations on using OpenBSD!</p>
      </li>
    </ol>
    <h2 id="loc-22">6 - Installing Arch Linux</h2>
    <p>Arch Linux is interesting for you to install and use because:</p>
    <ul>
      <li>
        <p>It has a text-based installation procedure which is even more minimalist than the OpenBSD one. While an installation script exists, it does not configure Linux as we would like, so we will be installing everything command by command.</p>
      </li>
      <li>
        <p>It will show you that not all Linux distributions have GUI-based install procedures like Ubuntu or Debian. This is an opportunity to get comfortable in the command line if you haven’t done so already.</p>
      </li>
    </ul>
    <h3 id="loc-23">6.1 - Creating the Arch Linux VM</h3>
    <ol>
      <li>
        <p>Download Arch Linux:</p>
        <ol>
          <li>Go to the <a href="https://archlinux.org/">Arch Linux website</a> and navigate to the “Download” page.</li>
          <li>On the “Download” page, go to the “Worldwide” section, and click the first mirror link available.</li>
          <li>Download the <code>archlinux-x86_64.iso</code> file.</li>
        </ol>
      </li>
      <li>
        <p>Create a new VM in VirtualBox or UTM:</p>
        <ol>
          <li>Give the name “cs492-archlinux” to your new VM.</li>
          <li>For the “ISO image”, select the <code>archlinux-x86_64.iso</code> file you just downloaded.</li>
          <li>
            <p>Under “Hardware”:</p>
            <ul>
              <li>Memory Size: 4096 MB</li>
              <li>Processors: max physical cores</li>
            </ul>
          </li>
          <li>
            <p>Under “Hard Disk”:</p>
            <ul>
              <li>Virtual hard disk size: 6 GB</li>
            </ul>
          </li>
        </ol>
      </li>
      <li>
        <p>(Apple UTM Users) Under “Display” in VM settings, change the “Emulated Display Card” to “VGA”, or you may see a blank screen when you try to install Arch.</p>
      </li>
    </ol>
    <p>At this point, you should have a virtual machine with an empty 6 GB virtual disk, and a virtual CD containing the Arch Linux installation software.</p>
    <h3 id="loc-24">6.2 - Installing Arch Linux on the VM</h3>
    <p><em>Remember to read each step carefully before doing it!</em></p>
    <h4 id="loc-25">6.2.1 - Booting the VM</h4>
    <ol>
      <li>
        <p>Start your virtual machine.</p>
        <blockquote class="aside">
          <p>The VM will automatically boot from its virtual CD and start running the installation software, a special copy of Arch.</p>
          <p>Similar to OpenBSD, you should see a menu come up. This is Arch’s installation bootloader, which will allow you to select the kernel to use, and will automatically select a kernel after 15 seconds.</p>
          <p>Once the kernel is selected, it will start. In Linux, kernel messages should show a timestamp at the beginning of the line. This may be blank (<code>::</code>) in the VM.</p>
          <p>As the kernel starts, <a href="https://en.wikipedia.org/wiki/Systemd"><code>systemd</code></a> will start. <code>systemd</code> is a part of the Arch operating system, outside the kernel, that automatically starts various system services. It will show logging messages that start with a green <code>[OK]</code> if the corresponding service started successfully.</p>
          <p>After the kernel finishes booting, you will get a shell with the prompt <code>root@archiso ~ # </code>. This is normal, since Arch doesn’t have an installation script by default. Instead, you will now install Arch manually by executing the commands one by one. <em>Note: “root” is the system administrator, “archiso” means you are running from the ISO-formatted installation CD, “ “ means you are currently in root’s home directory, and “#” is the traditional shell prompt when you are root.</em></p>
        </blockquote>
      </li>
      <li>
        <p>If the text is too small in the terminal, run the command <code>setfont -d</code> to double the font size on the screen. Run <code>setfont</code> without flags to reset the font size.</p>
      </li>
    </ol>
    <h4 id="loc-26">6.2.2 - Network Configuration</h4>
    <ol>
      <li>Arch should have automatically connected to the Internet via the VM’s Ethernet network interface. To verify this, execute <code data-lang="bash"><span style="color: #4b69c6">ping</span> archlinux.org</code>. If the network is set up correctly, you should see <a href="https://en.wikipedia.org/wiki/Ping_(networking_utility)">ping</a> responses (it may take a while to run on UTM due to emulation). Stop ping with <code>Ctrl-C</code>.</li>
    </ol>
    <h4 id="loc-27">6.2.3 - Hard Disk Configuration</h4>
    <p>As with OpenBSD, we need to create a primary partition for Arch and a Linux file system inside this primary partition. However, where OpenBSD automated some of this process for us, we will need to use the <a href="https://en.wikipedia.org/wiki/Fdisk"><code>fdisk</code></a> utility ourselves to do so.</p>
    <h5 id="loc-28">6.2.3.1 - Root Disk and MBR Configuration</h5>
    <ol>
      <li>
        <p>List hard disk names with <code data-lang="bash"><span style="color: #4b69c6">fdisk</span> -l</code>. Ignore <code>/dev/loop</code> disks, as these are fake disks used by Linux internally. You should see a <code>/dev/sda</code> disk with a size of 6 GiB, with the name “VBOX HARDISK” (or “QEMU HARDISK” on UTM). We will create the primary partition here.</p>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">fdisk</span> /dev/sda</code> to begin an interactive editing session with the <code>/dev/sda</code> disk.</p>
        <ol>
          <li>
            <p>Enter <code>m</code> to see a list of <code>fdisk</code> commands. Commands are generally all single letters.</p>
          </li>
          <li>
            <p>Enter <code>p</code> to see the current list of primary partitions on the VM disk. Currently, it should show general disk information but list no primary partitions.</p>
          </li>
          <li>
            <p>Enter <code>n</code> to create a new primary partition with the following configuration:</p>
            <table>
              <thead>
                <tr>
                  <th><strong>Setting</strong></th>
                  <th><strong>Value</strong></th>
                  <th><strong>Comment</strong></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Partition Type</td>
                  <td>Default (<code>p</code>)</td>
                  <td>We have not discussed extended partitions yet and will stick with primary partitions.</td>
                </tr>
                <tr>
                  <td>Partition Number</td>
                  <td>Default (<code>1</code>)</td>
                  <td>Recall that MBR supports up to 4 primary partitions. Using <code>1</code> will create the partition <code>/dev/sda1</code>.</td>
                </tr>
                <tr>
                  <td>First Sector</td>
                  <td>Default (<code>2048</code>)</td>
                  <td>
                    <p>This indicates the hard disk sector number where the start of the primary partition will be.</p>
                    <p>Note again that we will leave some free space left between the MBR (first sector) and the start of the primary partition for the bootloader. Don’t modify this value unless you know very well what you are doing.</p>
                  </td>
                </tr>
                <tr>
                  <td>Last Sector</td>
                  <td>Default (a large number)</td>
                  <td>The last sector of the primary partition. The difference between the first and last sector numbers plus 1 will give the total size of the new partition, which will be the entire disk size here.</td>
                </tr>
              </tbody>
            </table>
          </li>
          <li>
            <p>Enter <code>p</code> to see the list of primary partitions (not yet committed). You should see the device <code>/dev/sda1</code> with the start and end sector numbers used, and the type “Linux”.</p>
            <blockquote class="aside">There is a separate fdisk command to create a Windows or OpenBSD primary partition.</blockquote>
          </li>
          <li>
            <p>If you made a mistake, you can delete the staged partition using <code>d</code> to start over. Once you are sure things are set up correctly, you can commit the changes to disk by entering <code>w</code>. This will also return you to the root shell.</p>
          </li>
        </ol>
      </li>
    </ol>
    <h5 id="loc-29">6.2.3.2 - File System Configuration</h5>
    <p>Linux uses exactly one file system per primary partition (like Windows), so the “disk label” process in OpenBSD is unnecessary.</p>
    <ol>
      <li>
        <p>Create a new file system in <code>/dev/sda1</code> by runing <code data-lang="bash"><span style="color: #4b69c6">mkfs.ext4</span> /dev/sda1</code>.</p>
        <blockquote class="aside">
          <p>This creates a new <a href="https://en.wikipedia.org/wiki/Ext4">ext4</a> file system in <code>/dev/sda1</code> that spans the entire primary partition.</p>
          <p>The output of <code>mkfs.ext4</code> will print information referencing “<a href="https://en.wikipedia.org/wiki/Inode">inodes</a>” and “superblock”, which we will cover later in the semester.</p>
        </blockquote>
      </li>
      <li>
        <p><a href="https://en.wikipedia.org/wiki/Mount_(computing)">Mount</a> the new file system to an existing directory by running <code>mount /dev/sda1 /mnt</code>.</p>
        <blockquote class="aside">
          <p>On OpenBSD, the new file system you created was automatically mounted for you on <code>/mnt</code> by the installation script. On Arch, you need to do this yourself. Right now, the kernel you are using is the one you booted from the CD, and the <code>/</code> root file system is the one from the CD (for simplicity’s sake).</p>
          <p>The command you ran will temporarily mount the file system in the <code>/dev/sda1</code> partition in the <code>/mnt</code> directory so you can actually modify it during the rest of the installation procedure.</p>
        </blockquote>
      </li>
      <li>
        <p>Running <code>mount</code> again will show all currently mounted file systems. At the end of the output, you should see the primary partition <code>/dev/sda1</code> ext4 file system mounted in <code>/mnt</code>.</p>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">ls</span> -l /mnt</code> to check that the new file system is empty, except for a “lost+found” directory, which can be ignored.</p>
      </li>
    </ol>
    <h4 id="loc-30">6.2.4 - System Installation and Configuration</h4>
    <ol>
      <li>
        <p>Once the file system is mounted, you can copy the file sets for Arch to the new file system.</p>
        <ol>
          <li>
            <p>File sets for Arch are available as packages from servers on the Internet. Run <code data-lang="bash"><span style="color: #4b69c6">reflector</span></code> to configure the closest servers for downloading file sets.</p>
          </li>
          <li>
            <p>Run <code data-lang="bash"><span style="color: #4b69c6">pacstrap</span> -K /mnt base linux linux-firmware</code>. It may take a while.</p>
            <blockquote class="aside">
              <p>The <code>pacstrap</code> package manager will download the <code>base</code> package for cli utilities, <code>linux</code> package for the Arck kernel, and the <code>linux-firmware</code> package for updating hardware device controller firmware.</p>
              <p>All of these will be installed the the <code>/mnt</code> directory as a minimal Arch system.</p>
            </blockquote>
          </li>
        </ol>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">genfstab</span> -U /mnt <span style="color: #d73948">>></span> /mnt/etc/fstab</code> to generate a new <a href="https://en.wikipedia.org/wiki/Fstab"><code>/etc/fstab</code></a> file in the file system, which Arch will use later when booting to know determine the file system to use.</p>
        <blockquote class="aside">Note: the <code>>></code> means “append program stdout to the end of the file”, while a single <code>></code> will overwrite the file.</blockquote>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">cat</span> /mnt/etc/fstab</code> to see the content of the new file. You should see that your <code>/dev/sda1</code> primary partition will be the root file system once you boot Arch from the VM’s hard disk.</p>
      </li>
      <li>
        <p>Switch to the new file system root by running <code data-lang="bash"><span style="color: #4b69c6">arch-chroot</span> /mnt</code>. This will cause <code>/</code> to be located at <code>/mnt</code>, and the shell prompt will change from <code>root@archiso ~ #<span style="white-space: pre-wrap">&#x20;</span></code> to <code>[root@archiso /]# </code>.</p>
      </li>
      <li>
        <p>Execute <code>ls</code> to list the contents of the root directory in the new file system. You should see all the <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">root-level Unix directories</a>.</p>
      </li>
      <li>
        <p>Configure date and time:</p>
        <ol>
          <li>
            <p>Execute <code>date</code> and confirm that the VM is currently configured to use the default <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a> time zone.</p>
          </li>
          <li>
            <p>Execute <code data-lang="bash"><span style="color: #4b69c6">ln</span> -sf /usr/share/zoneinfo/EST /etc/localtime</code>. This will specify the correct time zone by creating a <a href="https://en.wikipedia.org/wiki/Symbolic_link">symlink</a> to point at the right time zone.</p>
          </li>
          <li>
            <p>Execute <code>date</code> again and confirm the date and time are correct.</p>
          </li>
        </ol>
      </li>
      <li>
        <p>Name the VM system</p>
        <ol>
          <li>
            <p>Run <code data-lang="bash"><span style="color: #4b69c6">cat</span> <span style="color: #d73948">></span> /etc/hostname</code>. The <code>cat</code> program will wait for input on stdin.</p>
          </li>
          <li>
            <p>Type in <code>arch</code> and hit <code>Enter</code>, then press <code>Ctrl-d</code> to quit to the shell.</p>
          </li>
          <li>
            <p>Execute <code data-lang="bash"><span style="color: #4b69c6">cat</span> /etc/hostname</code> to see the content of the new <code>/etc/hostname</code> file, and you should see <code>arch</code> on a single line.</p>
          </li>
        </ol>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">passwd</span></code> to set the password for the root user. Use <code>arch</code> as the password. This will be a blind input, which you will input type twice.</p>
      </li>
    </ol>
    <h5 id="loc-31">6.2.4.1 - Package Manager and Network Configuration</h5>
    <ol>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">pacman</span> -S reflector</code> to install <code>reflector</code>. We will use <code>reflector</code> to configure the new Arch system with the correct package servers.</p>
        <blockquote class="aside">
          <p>The <code>reflector</code> program we used before was from the CD, and is not yet available in the new file system.</p>
          <p>The <code>pacman</code> program is Arch’s standard package manager. You can use it to download and install thousands of different software packages, similar to <code>pkg_add</code> on OpenBSD and <code>apt</code> on Debian-based systems.</p>
        </blockquote>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">reflector</span></code> again to configure the new Arch system with package servers.</p>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">pacman</span> -S dhcpcd</code> to install a <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">DHCP</a> client, otherwise the system will not be able to get an IP address and connect to the Internet when we boot from the hard disk later.</p>
      </li>
      <li>
        <p>Find the VM’s network interface by running <code data-lang="bash"><span style="color: #4b69c6">ip</span> addr</code>.</p>
        <blockquote class="aside">
          <p>You should see a network name like “enp0s1”, ignore <a href="https://en.wikipedia.org/wiki/Loopback#Virtual_loopback_interface">loopback</a> interfaces. Remember this name, as we will use it to configure <a href="https://en.wikipedia.org/wiki/Systemd"><code>systemd</code></a> to automatically start the <code>dhcpcd</code> client at boot time.</p>
          <p><code>dhcpcd</code> will automatically get an IP address for the VM’s Ethernet network interface to allow the VM to connect to the internet.</p>
        </blockquote>
      </li>
      <li>
        <p>Configure <code>systemd</code> to start the <code>dhcpcd</code> client with your network name by running <code data-lang="bash"><span style="color: #4b69c6">systemctl</span> enable dhcpcd@<span style="color: #d73948">&lt;</span>network-name<span style="color: #d73948">></span>.service</code>. For example, with “enp0s1”, it would be <code data-lang="bash"><span style="color: #4b69c6">systemctl</span> enable dhcpcd@enp0s1.service</code>.</p>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">systemctl</span> enable systemd-resolved.service</code> to configure the <a href="https://en.wikipedia.org/wiki/Domain_Name_System">DNS</a> resolver, which translates computer names to IP addresses for you. The OpenBSD installation script performed this network configuration for you.</p>
      </li>
    </ol>
    <h4 id="loc-32">6.2.5 - Bootloader Installation</h4>
    <p>The last step is to install a bootloader, which will load the kernel into memory at boot time. The standard bootloader for Linux is <a href="https://en.wikipedia.org/wiki/GNU_GRUB">GRUB</a>.</p>
    <ol>
      <li>
        <p>Download GRUB: <code data-lang="bash"><span style="color: #4b69c6">pacman</span> -S grub</code>.</p>
      </li>
      <li>
        <p>Install GRUB: <code data-lang="bash"><span style="color: #4b69c6">grub-install</span> --target<span style="color: #d73948">=</span>i386-pc /dev/sda</code>.</p>
        <p>This installs GRUB after the master boot record and before the primary partition.</p>
      </li>
      <li>
        <p>Generate the <code>/boot/grub/grub.cfg</code> configuration file for GRUB: <code data-lang="bash"><span style="color: #4b69c6">grub-mkconfig</span> -o /boot/grub/grub.cfg</code>.</p>
        <p>This tells GRUB which menu entries to offer to the user when booting the VM. You can execute <code data-lang="bash"><span style="color: #4b69c6">cat</span> /boot/grub/grub.cfg</code> to see the content of GRUB’s configuration file. It’s ugly.</p>
      </li>
      <li>
        <p>Run <code data-lang="bash"><span style="color: #4b69c6">exit</span></code> to go back to the <code>/</code> root file system of the installation CD, then depending on your system, do the following:</p>
        <div class="tabs"><button class="btn tab-btn arch-unmount-instructions windows selected" onclick="show_tab_class(event, &quot;arch-unmount-instructions&quot;, &quot;windows&quot;)">windows</button><button class="btn tab-btn arch-unmount-instructions macos" onclick="show_tab_class(event, &quot;arch-unmount-instructions&quot;, &quot;macos&quot;)">macos</button></div>
        <div class="tab-content arch-unmount-instructions windows selected">
          <p>Before you shut down the VM, go the the “Devices” menu of the VirtualBox window.</p>
          <p>Under “Optical drives”, select “Remove disk from virtual drive”. Click “Force Unmount” if necessary.</p>
          <p>Then execute <code data-lang="bash"><span style="color: #4b69c6">shutdown</span> now</code> to stop the VM.</p>
        </div>
        <div class="tab-content arch-unmount-instructions macos">
          <p>Execute <code data-lang="bash"><span style="color: #4b69c6">shutdown</span> now</code> to stop the VM.</p>
          <p>Once the system has shut down, close the window and open UTM settings for the VM.</p>
          <p>Under “IDE Drive”, select the virtual installation CD (<code>archlinux-x86_64.iso</code>), then select “Delete Drive”.</p>
        </div>
      </li>
    </ol>
    <h3 id="loc-33">6.3 - Using Arch Linux</h3>
    <p>We will now create a user account and, like OpenBSD, need to give our user account admin privileges.</p>
    <h4 id="loc-34">6.3.1 - Setting User Admin Privileges</h4>
    <ol>
      <li>
        <p>Start the Arch Linux VM. You should see a similar process as before, where the GRUB boot loader will copy the selected kernel to memory.</p>
        <p>After the kernel finishes booting, <code>systemd</code> will start and initialize all system services quietly.</p>
      </li>
      <li>
        <p>Login as user <code>root</code> with password <code>arch</code> and configure a new user account:</p>
        <ol>
          <li>
            <p>You will be logged in to a <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">bash</a> shell, where you can run <code>ls -la</code> to see the files in <code>root</code>’s home directory.</p>
          </li>
          <li>
            <p>Execute <code data-lang="bash"><span style="color: #4b69c6">setfont</span> -d</code> to double the font size if needed.</p>
          </li>
          <li>
            <p>Create a new user (replace with your name and Stevens login): <code data-lang="bash"><span style="color: #4b69c6">useradd</span> -c <span style="color: #198810">'</span><span style="color: #198810">Ryan Tsang</span><span style="color: #198810">'</span> -m rtsang1</code>.</p>
          </li>
          <li>
            <p>Configure the user password, using <code>arch</code> as the password: <code data-lang="bash"><span style="color: #4b69c6">passwd</span> rtsang1</code>.</p>
          </li>
          <li>
            <p>Add your account to the <a href="https://en.wikipedia.org/wiki/Wheel_(computing)">wheel</a> group: <code data-lang="bash"><span style="color: #4b69c6">gpasswd</span> -a rtsang1 wheel</code>.</p>
          </li>
          <li>
            <p>Install <a href="https://en.wikipedia.org/wiki/Sudo"><code>sudo</code></a>: <code data-lang="bash"><span style="color: #4b69c6">pacman</span> -S sudo</code>.</p>
          </li>
          <li>
            <p>Install <a href="https://en.wikipedia.org/wiki/Vi_(text_editor)"><code>vi</code></a>: <code data-lang="bash"><span style="color: #4b69c6">pacman</span> -S vi</code>.</p>
          </li>
          <li>
            <p>Configure <code>sudo</code> to allow all users in the “wheel” group to run commands as root:</p>
            <ol>
              <li>
                <p>Edit the <code>/etc/sudoers</code> file: <code>visudo</code>.</p>
              </li>
              <li>
                <p>In <code>vi</code>, type <code>:125</code> and hit <code>Enter</code> to jump to line 125 in the file. This should be the first line that starts with <code># %wheel</code>.</p>
              </li>
              <li>
                <p>Uncomment the line (<code>\#</code> is a line comment) by typing <code>x</code> with the cursor highlighting the character. Do this again to delete the space as well.</p>
                <p>The line should now start with <code>%wheel</code>, which will allow all users in the <code>wheel</code> group to execute commands as admin.</p>
              </li>
              <li>
                <p>Type <code>:wq</code> and hit <code>Enter</code> to write the disk to file and quit <code>vi</code>.</p>
              </li>
            </ol>
          </li>
          <li>
            <p>Run <code data-lang="bash"><span style="color: #4b69c6">exit</span></code> to return to the login prompt.</p>
          </li>
        </ol>
      </li>
    </ol>
    <h4 id="loc-35">6.3.2 - Starting the X Window GUI</h4>
    <p>As we did for OpenBSD, we will be manually installing the X Window GUI.</p>
    <ol>
      <li>
        <p>Login with your Stevens username using password <code>arch</code>. Run <code>pwd</code> to see where the current directory is located, and <code>ls -la</code> to show a detailed list of the current directory’s contents.</p>
      </li>
      <li>
        <p>Install the X Window system as root:</p>
        <pre><code data-lang="bash"><span style="color: #4b69c6">sudo</span> pacman -S xorg xorg-xinit xterm xorg-fonts-misc xorg-fonts-type1</code></pre>
        <p>This will install the X Window system itself (<code>xorg</code>), <code>xterm</code>, and some fonts.</p>
      </li>
      <li>
        <p>Install the <a href="https://en.wikipedia.org/wiki/IceWM">Ice Window Manager</a>:</p>
        <pre><code data-lang="bash"><span style="color: #4b69c6">sudo</span> pacman -S icewm</code></pre>
      </li>
      <li>
        <p>Configure X Window to use IceWM as its window manager by creating a file named <code>.xinitrc</code> in your home directory with the name of the window manager to use:</p>
        <pre><code data-lang="bash"><span style="color: #4b69c6">echo</span> <span style="color: #198810">"</span><span style="color: #198810">icewm</span><span style="color: #198810">"</span> <span style="color: #d73948">></span> .xinitrc</code></pre>
        <p>Note the “.” at the beginning of the filename. This is common for configuration files in Unix. If you run <code data-lang="bash"><span style="color: #4b69c6">cat</span> .xinitrc</code>, you should see only “icewm” appear on the console output.</p>
      </li>
      <li>
        <p>Run <code data-lang="bash"><span style="color: #4b69c6">startx</span></code> to start X Window.</p>
      </li>
    </ol>
    <h3 id="loc-36">6.4 - Deliverables</h3>
    <p>To prove you have installed and used Arch successfully, you will submit a screenshot showing the Arch Linux kernel version and the output of the <code>id</code> command.</p>
    <ol>
      <li>
        <p>Enlarge the text in the <a href="https://en.wikipedia.org/wiki/Xterm"><code>xterm</code></a> terminal window.</p>
        <ol>
          <li>Hold <code>Ctrl+Right-Click</code> in the center of the <code>xterm</code> window to see text size options and select “Huge”.</li>
        </ol>
      </li>
      <li>
        <p>Run the following commands:</p>
        <ol>
          <li><code data-lang="bash"><span style="color: #4b69c6">uname</span> -a</code> to show Arch Linux kernel version.</li>
          <li><code data-lang="bash"><span style="color: #4b69c6">id</span></code> to show username and user groups.</li>
        </ol>
      </li>
      <li>
        <p>Take a screenshot of the Arch screen. You can use VirtualBox’s built-in option <code>View -> Take Screenshot</code>, or your host OS screenshot tools.</p>
        <p>An example can be seen in Figure <a href="#screenshot-arch">Figure 2</a>.</p>
        <figure id="screenshot-arch">
          <div class="image fit"><img src="/images/screenshot-arch.png"></div>
          <figcaption>Figure 2: Arch Linux Deliverable Example</figcaption>
        </figure>
      </li>
      <li>
        <p>Once you have a screenshot, you can shut down Arch by running <code data-lang="bash"><span style="color: #4b69c6">sudo</span> shutdown now</code> in the xterm window and enter the root password.</p>
      </li>
      <li>
        <p>After powerdown, you can delete the entire VM as it will not be used again in this course. You can also delete the ISO file.</p>
        <p>Congratulations on using Arch!</p>
      </li>
    </ol>
    <h2 id="loc-37">7 - Quick Comparison of OpenBSD and Arch Linux</h2>
    <p>If you compare te way you installed these two operating systems, the whole procedure is largely the same:</p>
    <ol>
      <li>Download and boot a special version of the OS from a CD (or USB thumb drive)</li>
      <li>Create a primary partition on the hard disk</li>
      <li>Create a file system inside the primary partition</li>
      <li>Copy and install all the necessary files for the new OS from the CD or Internet</li>
      <li>Install a bootloader, which will start the kernel on boot</li>
      <li>Configure various settings, such as network interface, users, time zone, and other software.</li>
    </ol>
    <p>There are a few notable observations:</p>
    <ol>
      <li>
        <p>OpenBSD normally uses only one primary partition, which can contain multiple file systems. Arch Linux, and Linux systems in general, as well as Windows, can use mulitiple primary partitions, with a single file system on each partition. In practice, the result is generally the same: you can have multiple file systems for various purposes (e.g. <code>/</code> for root, <code>/home</code> for users, etc.)</p>
      </li>
      <li>
        <p>OpenBSD has a nice, but terse, installation script that does many things for you. Arch also has an installation script, but we did things manually here.</p>
      </li>
      <li>
        <p>Both operating systems have many shared utility programs (<code>ls</code>, <code>pwd</code>, <code>cd</code>, <code>fdisk</code>, etc.) but some are different (<code>doas</code> vs. <code>sudo</code>, <code>pkg_add</code> vs. <code>pacman</code>).</p>
      </li>
      <li>
        <p>Both operating systems use the same X Window GUI, which is quite basic, but is the standard GUI for Unix systems. On top of X Window, you can install a nicer looking “<a href="https://en.wikipedia.org/wiki/Desktop_environment">desktop environment</a>”, such as <a href="https://en.wikipedia.org/wiki/GNOME">GNOME</a>, <a href="https://en.wikipedia.org/wiki/KDE_Plasma_5">KDE</a>, <a href="https://en.wikipedia.org/wiki/Xfce">Xfce</a>, or any number of others.</p>
      </li>
    </ol>
    <h2 id="loc-38">8 - Installing Debian</h2>
    <p>Now we will install <a href="https://en.wikipedia.org/wiki/Debian">Debian</a>, which we will be using for the rest of th semester. If you have used <a href="https://en.wikipedia.org/wiki/Ubuntu">Ubuntu</a> before, it will feel very similar, as Ubuntu is based on Debian, and uses the same underlying package manager, <a href="https://en.wikipedia.org/wiki/APT_(software)">apt</a>. Debian is just as easy to use, but ships with less software and automatically shows the GRUB bootloader at boot time, which you will need to use in later assignments to boot your own Linux kernel.</p>
    <h3 id="loc-39">8.1 - Creating the Debian VM</h3>
    <ol>
      <li>
        <p>Download Debian</p>
        <ol>
          <li>Visit the <a href="https://www.debian.org/">Debian homepage</a> and <strong><em>ignore</em></strong> the “Download” button. Visit the “Other downloads” link instead.</li>
          <li>Navigate to the section “Download an installation image” and visit the “small installation image” link.</li>
          <li>Navigate to the section “Small CDs or USB sticks” and download the “amd64” option.</li>
        </ol>
      </li>
    </ol>
    <p>From here, install instructions are different for VirtualBox and UTM.</p>
    <div class="tabs"><button class="btn tab-btn debian-install-instructions virtualbox selected" onclick="show_tab_class(event, &quot;debian-install-instructions&quot;, &quot;virtualbox&quot;)">virtualbox</button><button class="btn tab-btn debian-install-instructions utm" onclick="show_tab_class(event, &quot;debian-install-instructions&quot;, &quot;utm&quot;)">utm</button></div>
    <div class="tab-content debian-install-instructions virtualbox selected">
      <h4 id="loc-40">8.1.1 - VirtualBox</h4>
      <ol>
        <li>
          <p>Create a new VM:</p>
          <ol>
            <li>Give the name “cs492-debian” to the VM.</li>
            <li>For “ISO image”, select <code>debian-X.Y.Z-amd64-netinst.iso</code>. Leave “Skip Unattended Installation” box <em>unchecked</em>.</li>
            <li>
              <p>Select the “Unattended Install” option and use the following configurations:</p>
              <table>
                <thead>
                  <tr>
                    <th><strong>Setting</strong></th>
                    <th><strong>Value</strong></th>
                    <th><strong>Comment</strong></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Username</td>
                    <td>Stevens username (e.g. <code>rtsang1</code>)</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Password</td>
                    <td><code>debian</code></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Hostname</td>
                    <td><code>debian</code></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Domain Name</td>
                    <td>Default</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Guest Additions</td>
                    <td>Yes</td>
                    <td>Use the <code>VBoxGuestAdditions_X.Y.Z.iso</code> file you downloaded previously.</td>
                  </tr>
                  <tr>
                    <td>Memory</td>
                    <td>Maximum recommended</td>
                    <td>Use the limit of the memory green zone</td>
                  </tr>
                  <tr>
                    <td>Processors</td>
                    <td>Maximum recommended</td>
                    <td>Use the limit of the cpu green zone. You will need the power when you manually compile the linux kernel in the next assignment.</td>
                  </tr>
                  <tr>
                    <td>Virtual Hard Disk Size</td>
                    <td>60 GB</td>
                    <td>The OS alone requires at least 6 GB, rounded up to 20 GB for additional software, such as VS Code, another 20 GB for a “working” copy of the Linux kernel source code, and another 20 GB for a backup of compiled kernel code. The backup will be needed if you bork the working copy in programming assignment 2, as saving compiled artifacts in a known good state will reduce compile time if you need to nuke your working copy.</td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ol>
        </li>
      </ol>
      <p>VirtualBox will create the VM with an empty 60 GB hard disk and virtual CD, then automatically boot the VM and run the install process automatically.</p>
      <blockquote class="aside">
        <p>If you watch carefully, you should see the following:</p>
        <ol>
          <li>The VM boots the Linux kernel</li>
          <li>DHCP will configure the VM’s <code>enp0s3</code> Ethernet network interface to connect to the internet</li>
          <li>A partitioning tool will create a primary partition with a new file system</li>
          <li>The base Debian system will be installed to the file system and configured</li>
          <li>Many extra software packages will be installed (e.g. Python, LibreOffice, etc.)</li>
          <li>GRUB will be installed</li>
          <li>More configuration and cleanup</li>
          <li>Once the system is ready, the install CD will be automatically ejected and the VM will reboot.</li>
          <li>VM boots from hard disk</li>
          <li>GRUB bootloader starts</li>
          <li>Linux kernel starts</li>
          <li><code>systemd</code> starts</li>
          <li>Login prompt displays in the default <a href="https://en.wikipedia.org/wiki/GNOME">GNOME</a> desktop environment, which uses the <a href="https://en.wikipedia.org/wiki/Wayland_(protocol)#Wayland_compositors">Wayland compositor</a> instead of X Window.</li>
        </ol>
      </blockquote>
    </div>
    <div class="tab-content debian-install-instructions utm">
      <h4 id="loc-41">8.1.2 - UTM</h4>
      <p>Unlike VirtualBox, UTM cannot automatically install Debian, and you will need to use Debian’s installation GUI, which is very similar to setting up Ubuntu.</p>
      <ol>
        <li>
          <p>Create a VM with the name <code>cs492-debian</code> and 60 GB disk size. Refer to <a href="#utm-steps">Section 3.2.1</a>.</p>
        </li>
        <li>
          <p>In the VM settings, change the CPU to “qemu64” (end of the list).</p>
        </li>
        <li>
          <p>Start the VM.</p>
        </li>
        <li>
          <p>Install Debian using the default “Graphical install” option with the following configuration:</p>
          <table>
            <thead>
              <tr>
                <th><strong>Setting</strong></th>
                <th><strong>Value</strong></th>
                <th><strong>Comment</strong></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Language</td>
                <td>Default (<code>English</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Location</td>
                <td>Default (<code>United States</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Keyboard</td>
                <td>Default (<code>American English</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Hostname</td>
                <td><code>debian</code></td>
                <td></td>
              </tr>
              <tr>
                <td>Domain name</td>
                <td>Default (none)</td>
                <td></td>
              </tr>
              <tr>
                <td>Root password</td>
                <td><code>debian</code></td>
                <td></td>
              </tr>
              <tr>
                <td>Full Name</td>
                <td>Your name</td>
                <td></td>
              </tr>
              <tr>
                <td>Username</td>
                <td>Your Stevens login (e.g. <code>rtsang1</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Password</td>
                <td><code>debian</code></td>
                <td></td>
              </tr>
              <tr>
                <td>Time Zone</td>
                <td>Default (<code>Eastern</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Partitioning Method</td>
                <td>Default (<code>Guided - use entire disk</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Partitioning Scheme</td>
                <td>Default (<code>All files in one partiton</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Write changes to disk?</td>
                <td>Yes</td>
                <td></td>
              </tr>
              <tr>
                <td>Scan extra installation media?</td>
                <td>Default (<code>No</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Debian archive mirror country</td>
                <td>Default (<code>United States</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Debian archive mirror</td>
                <td>Default (<code>deb.debian.org</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>HTTP proxy information</td>
                <td>Default (none)</td>
                <td></td>
              </tr>
              <tr>
                <td>Pacticipate in package usage survey</td>
                <td>Default (<code>No</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Choose software to install</td>
                <td>Default</td>
                <td></td>
              </tr>
              <tr>
                <td>Install GRUB to your primary drive?</td>
                <td>Default (<code>Yes</code>)</td>
                <td></td>
              </tr>
              <tr>
                <td>Device for bootloader installation</td>
                <td><code>/dev/sda</code></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </li>
        <li>
          <p>Remove the virtual installation CD.</p>
        </li>
      </ol>
    </div>
    <h3 id="loc-42">8.2 - Using Debian</h3>
    <ol>
      <li>
        <p>Start the VM and log in with your <code>debian</code> password.</p>
      </li>
      <li>
        <p><code>Skip</code> your way through the “Welcome” windows.</p>
      </li>
      <li>
        <p>If you do not see a toolbar at the bottom of the window, click the “Activities” menu in the top left corner. You should now see a toolbar with various applications that come preinstalled on Debian. We will not use these for the course.</p>
      </li>
      <li>
        <p>Select the 3x3 grid of dots to see more applications, and find the “Terminal” application. <code>Right-Click</code> “Terminal” and select “Pin to Dash”, which will add the application to the toolbar. Then open the “Terminal” application.</p>
      </li>
      <li>
        <p>Execute <code data-lang="bash"><span style="color: #4b69c6">ls</span> -la</code> to list the files in your home directory, and <code data-lang="bash"><span style="color: #4b69c6">pwd</span></code> to print the path to your home directory.</p>
      </li>
      <li>
        <p>Give yourself administrative privileges to use <code>sudo</code>:</p>
        <ol>
          <li>
            <p>Switch to the root user account by running <code data-lang="bash"><span style="color: #4b69c6">su</span> -</code> (which means “<a href="https://en.wikipedia.org/wiki/Su_(Unix)">substitute user</a>” and historically, “<a href="https://en.wikipedia.org/wiki/Superuser">superuser</a>”). You will need to login using the root credentials, <code>debian</code>.</p>
          </li>
          <li>
            <p>As root, add your user account to the <code>sudo</code> group (unlike OpenBSD and Arch, which use the <code>wheel</code> group):</p>
            <pre><code data-lang="bash"><span style="color: #4b69c6">usermod</span> -aG sudo rtsang1</code></pre>
          </li>
          <li>
            <p>Run <code>exit</code> to return to the user shell and restart Debian.</p>
            <ol>
              <li>Click the battery icon in the upper right corner of the desktop.</li>
              <li>Click the power icon and select “Restart” and confirm.</li>
            </ol>
          </li>
          <li>
            <p>Log back in for you changes to take effect.</p>
          </li>
        </ol>
      </li>
    </ol>
    <h4 id="loc-43">8.2.1 - Exploring Debian</h4>
    <ol>
      <li>
        <p>Run the following commands to have a look around your Debian VM</p>
        <ol>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">sudo</span> fdisk -l</code></p>
            <p>This should show the VM’s disk is named <code>/dev/sda</code> and that it has a <code>/dev/sda1</code> “Linux” bootable primary partition, inidcated by a <code>*</code> in the output.</p>
            <blockquote class="aside" id="aside-debian-fdisk">There is also a <code>/dev/sda5</code> swap partition, which is used by the kernel’s virtual memory system, as we will see later in the semester. Note also that although the MBR partition system only allows 5 primary partitions, the swap partition has index 5. This is because the swap partition is not a primary partition, but an <em>extended partition</em>, which itself is in the <code>/dev/sda2</code> primary partion, set up to support extended partitions. This is why <code>/dev/sda2</code> and <code>/dev/sda5</code> have about the same start sector and size.</blockquote>
          </li>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">cat</span> /etc/fstab</code></p>
            <p>This will show your <code>/</code> root file system is of type ext4. You can also see the swap extended partition if of the special type “swap”, meaning it does not contain a file system.</p>
          </li>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">mount</span></code></p>
            <p>This will show that the <code>/dev/sda1</code> ext4 primary partition is mounted at <code>/</code>.</p>
          </li>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">df</span> -h</code></p>
            <p>This will show a usage summary for various file systems. <code>/dev/sda1</code> should currently be using about 5 GB, with another 50GB or so available.</p>
          </li>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">ls</span> /boot</code></p>
            <p>This is where your linux kernel is stored. You can also find there the “grub” directory that contains the <code>grub.cfg</code> configuration file for the GRUB bootloader.</p>
          </li>
          <li>
            <p><code data-lang="bash"><span style="color: #4b69c6">which</span> gcc</code></p>
            <p>This will print <code>/usr/bin/gcc</code> if C compiler is already installed. If it is not, you can install it and other C development packages by running:</p>
            <pre><code data-lang="bash"><span style="color: #4b69c6">sudo</span> apt install build-essential</code></pre>
            <p>The <code>which</code> command is used to find where different programs are installed on your system if they are in your current PATH.</p>
            <p>Try doing the same with the <code>vi</code> text editor, the <code>make</code> build system, the <code>python3</code> interpreter, and the <code>firefox</code> web browser. You can see a long list of default installed programs by running <code data-lang="bash"><span style="color: #4b69c6">ls</span> /usr/bin</code>.</p>
          </li>
        </ol>
      </li>
      <li>
        <p>Installing software</p>
        <ol>
          <li>
            <p>Use the <code>apt</code> package manager to install software on Debian, for example, <a href="https://en.wikipedia.org/wiki/Emacs">emacs</a>: <code data-lang="bash"><span style="color: #4b69c6">sudo</span> apt install emacs-nox</code></p>
          </li>
          <li>
            <p>You can search for available packages in the <a href="https://packages.debian.org/stable/">debian package repository</a>.</p>
          </li>
        </ol>
      </li>
      <li>
        <p>To shut down the VM, execute <code data-lang="bash"><span style="color: #4b69c6">sudo</span> shutdown now</code> in a terminal window, or user the GUI option. Shut down your VM now.</p>
        <p><strong>Note: Never shut down the VM by closing the window in your host machine!</strong> Doing so can corrupt the virtual file system in the VM, and while the file system is capable of some self-repair, it is not advisable to rely on it. Only do so if the VM is truly frozen or unresponsive.</p>
      </li>
    </ol>
    <h4 id="loc-44">8.2.2 - Configure Host File Sharing</h4>
    <div class="tabs"><button class="btn tab-btn file-sharing-instructions virtualbox selected" onclick="show_tab_class(event, &quot;file-sharing-instructions&quot;, &quot;virtualbox&quot;)">virtualbox</button><button class="btn tab-btn file-sharing-instructions utm" onclick="show_tab_class(event, &quot;file-sharing-instructions&quot;, &quot;utm&quot;)">utm</button></div>
    <div class="tab-content file-sharing-instructions virtualbox selected">
      <h5 id="loc-45">8.2.2.1 - VirtualBox</h5>
      <ol>
        <li>
          <p>In the “General” menu, under “Advanced”, change both “Shared Clipboard” and “Drag’n’Drop” to be “bidiractional”. This will allow you to copy and paste between Debian and your host OS.</p>
        </li>
        <li>
          <p>Set up a shared directory with the host:</p>
          <ol>
            <li>On you host OS, create a new folder named “shared” anywhere you like.</li>
            <li>In the VirtualBox VM “Settings”, select “Shared folders”.</li>
            <li>
              <p>Add a new shared folder by selecting the green “+” icon and configure as follows:</p>
              <table>
                <thead>
                  <tr>
                    <th><strong>Setting</strong></th>
                    <th><strong>Value</strong></th>
                    <th><strong>Comment</strong></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Folder Path</td>
                    <td><code>shared</code></td>
                    <td>Use the “shared” folder you just created</td>
                  </tr>
                  <tr>
                    <td>Folder Name</td>
                    <td><code>shared</code></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Mount point</td>
                    <td><code>/mnt/shared</code></td>
                    <td>This will be the location of the shared folder in Debian.</td>
                  </tr>
                  <tr>
                    <td>Auto-mount</td>
                    <td><code>Yes</code></td>
                    <td>This will make sharing happen automatically when the VM starts.</td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ol>
        </li>
        <li>
          <p>Start the VM, log in, and open Terminal.</p>
        </li>
        <li>
          <p>Execute <code data-lang="bash"><span style="color: #4b69c6">ls</span> /mnt/shared</code> to confirm you can see the content of the <code>shared</code> folder on your host.</p>
        </li>
        <li>
          <p>In your home directory, run <code data-lang="bash"><span style="color: #4b69c6">ln</span> -s /mnt/shared shared</code>, then confirm the symlink works by running <code data-lang="bash"><span style="color: #4b69c6">ls</span> shared</code>. You should see the content of the <code>shared</code> folder.</p>
        </li>
      </ol>
    </div>
    <div class="tab-content file-sharing-instructions utm">
      <h5 id="loc-46">8.2.2.2 - UTM</h5>
      <p>You have options on UTM, though both have their downsides.</p>
      <p>You can use <a href="https://docs.getutm.app/guest-support/linux/#spice-webdav">SPICE WebDAV</a>, which has an easier setup, or <a href="https://docs.getutm.app/guest-support/linux/#virtfs">VirtFS</a>, which will have better performance.</p>
      <p>The instructions here are for setting up shared folders via VirtFS:</p>
      <ol>
        <li>
          <p>Create a folder named <code>shared</code> on your host OS, wherever you like.</p>
        </li>
        <li>
          <p>Before launching the VM, configure the VM to use VirtFS for sharing:</p>
          <ol>
            <li>Open VM settings and go to “Sharing”</li>
            <li>Ensure “Enable Clipboard Sharing” is checked</li>
            <li>Select “VirtFS” for “Directory Share Mode”</li>
            <li>Select the path to the <code>shared</code> directory you created</li>
          </ol>
        </li>
        <li>
          <p>Launch the VM and open Terminal</p>
        </li>
        <li>
          <p>Add the shared folder to the file system table (<code>fstab</code>):</p>
          <ol>
            <li>Run <code data-lang="bash"><span style="color: #4b69c6">sudo</span> vi /etc/fstab</code> to edit the <code>fstab</code> file with <code>vi</code>.</li>
            <li>
              <p>The following commands are case sensitive:</p>
              <ol>
                <li>Type <code>G</code> to go the start of the last line of the file.</li>
                <li>Type <code>o</code> to insert a new line below the current line and enter Insert mode.</li>
                <li>
                  <p>Add the following lines to the file:</p>
                  <pre><code># UTM Shared Folder<br>share /mnt/shared 9p trans=virtio,version=9p2000.L,rw,_netdev,nofail,auto 0 0</code></pre>
                </li>
                <li>Type <code>Esc</code> to leave Insert mode.</li>
                <li>Type <code>:wq</code> to write the changes to file and quit <code>vi</code>.</li>
              </ol>
            </li>
          </ol>
        </li>
        <li>
          <p>To avoid permissions issues, we will use <a href="https://bindfs.org/">bindfs</a> to then mount the <code>/mnt/shared</code> folder to a folder in our user home directory.</p>
          <ol>
            <li>
              <p>Install <code>bindfs</code>: <code data-lang="bash"><span style="color: #4b69c6">sudo</span> apt install bindfs</code></p>
            </li>
            <li>
              <p>We will likely need to map the user and group ids of files in <code>/mnt/shared</code>, so we need to find out the user and group IDs of the guest and host machines.</p>
            </li>
            <li>
              <p>In Debian, run <code data-lang="bash"><span style="color: #4b69c6">id</span></code> and find the user ID (UID) and group ID (GID). By default, these are typically both 1000.</p>
            </li>
            <li>
              <p>In a host terminal, run <code data-lang="bash"><span style="color: #4b69c6">id</span></code> and do the same.</p>
            </li>
            <li>
              <p>Now add the following lines to the <code>fstab</code>, following the same general procedure as above, and replacing bracketed fields (e.g. <code>&lt;guest_uid></code>) as needed:</p>
              <pre><code># bindfs mount to remap UID/GID<br>/mnt/shared /home/&lt;username>/shared fuse.bindfs map=&lt;host_uid>/&lt;guest_uid>:@&lt;host_gid>/@&lt;guest_gid>,x-systemd.require=/mnt/shared,_netdev,nofail,auto 0 0</code></pre>
            </li>
          </ol>
        </li>
        <li>
          <p>Restart the VM by running <code data-lang="bash"><span style="color: #4b69c6">sudo</span> reboot</code></p>
        </li>
        <li>
          <p>Test the shared directory:</p>
          <ol>
            <li>In your host OS, create a test file named <code>test.txt</code> in the <code>shared</code> directory you created.</li>
            <li>In Debian, edit it by running <code data-lang="bash"><span style="color: #4b69c6">echo</span> <span style="color: #198810">"</span><span style="color: #198810">testing</span><span style="color: #198810">"</span> <span style="color: #d73948">>></span> shared/test.txt</code>.</li>
            <li>In your host OS, check that the change appears by running <code data-lang="bash"><span style="color: #4b69c6">cat</span> test.txt</code> from a terminal in your host.</li>
          </ol>
        </li>
      </ol>
    </div>
    <h3 id="loc-47">8.3 - Deliverables</h3>
    <p>To prove you have installed and used Debian successfully, you will submit a screenshot showing the Debian kernel version and the output of the <code>id</code> command.</p>
    <ol>
      <li>
        <p>Enlarge the text in the <a href="https://en.wikipedia.org/wiki/Xterm"><code>xterm</code></a> terminal window.</p>
        <ol>
          <li>Hold <code>Ctrl+Right-Click</code> in the center of the <code>xterm</code> window to see text size options and select “Huge”.</li>
        </ol>
      </li>
      <li>
        <p>Run the following commands:</p>
        <ol>
          <li><code data-lang="bash"><span style="color: #4b69c6">uname</span> -a</code> to show Debian kernel version.</li>
          <li><code data-lang="bash"><span style="color: #4b69c6">id</span></code> to show username and user groups.</li>
        </ol>
      </li>
      <li>
        <p>Take a screenshot of the Debian screen. You can use VirtualBox’s built-in option <code>View -> Take Screenshot</code>, or your host OS screenshot tools.</p>
        <p>An example can be seen in Figure <a href="#screenshot-debian">Figure 3</a>.</p>
        <figure id="screenshot-debian">
          <div class="image fit"><img src="/images/screenshot-debian.png"></div>
          <figcaption>Figure 3: Debian Deliverable Example</figcaption>
        </figure>
      </li>
      <li>
        <p>Once you have a screenshot, you can shut down Debian and delete the ISO installation image.</p>
        <p>Congratulations on using debian!</p>
      </li>
    </ol>
    <h2 id="loc-48">9 - Submission</h2>
    <p>On Gradescope, submit a PDF file that contains:</p>
    <ol>
      <li>The Stevens Honor Pledge</li>
      <li>The 3 screenshots you created, one for OpenBSD, one for Arch, and one for Debian. Each screenshot should clearly show your login name, and the command output.</li>
    </ol>
  </body>
  <p><span style="display: inline-block"></span></p>
</html>
